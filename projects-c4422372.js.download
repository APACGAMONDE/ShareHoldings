System.register(["./frameworks.js","./vendor.js"],(function(){"use strict";var t,e,n,o,s,r,c,i,a,l,u,d,m,p,j,f,h,g,v,b,L,y,C,w,E,T,k,A,S,M,x,H,q,I,$,D,_,B,P;return{setters:[function(H){t=H.a_,e=H.q,n=H.f,o=H.E,s=H.ae,r=H.o,c=H.g,i=H.L,a=H.Y,l=H.k,u=H.ap,d=H.w,m=H.l,p=H.$,j=H.A,f=H.Q,h=H.I,g=H.h,v=H.a,b=H.i,L=H.a5,y=H.a1,C=H.M,w=H.az,E=H.P,T=H.ao,k=H.y,A=H.O,S=H.a$,M=H.b,x=H.a0},function(t){H=t.d,q=t.f,I=t.I,$=t.o,D=t.a,_=t.A,B=t.D,P=t.R}],execute:function(){function R(t){const e=new WeakMap;for(const n of t)e.set(n,n.getBoundingClientRect());return e}async function F(e,n,o){const s=n.get(e),r=o.get(e);if(!s||!r)throw new Error("invariant: Must have old and new positions for the element to animate -- app/assets/modules/github/magic-move.ts:13");const c=s.left-r.left,i=s.top-r.top;0===c&&0===i||(await t(),e.style.transform=`translateZ(0) translate(${c}px, ${i}px)`,e.style.transition="transform 0s",await t(),e.style.transform="",e.style.transition="transform 500ms",await new Promise(t=>e.addEventListener("transitionend",t,{once:!0})),e.style.transition="")}function K(t,e){const n=R(t),o=[];for(const s of t)o.push(F(s,e,n));return Promise.all(o)}let N;function U(t){if(!t)return;N&&clearTimeout(N);const n=e(document,".js-project-updated-message");n.textContent=t,n.classList.remove("d-none"),N=window.setTimeout((function(){n.textContent="",n.classList.add("d-none")}),3e3)}function W(t,e){const n=`column-${t.id}`,o=document.getElementById(n);if(o)return o;{const o=new I;return o.id=n,o.src=`${e}/${t.id}`,o}}function O(t,e){const n=`card-${t}`,o=document.getElementById(n);if(o)return o;{const o=new I;return o.id=n,o.src=`${e}/${t}`,o.onerror=function(){o.remove()},o}}function V(t,n){const o=n.querySelector(".js-project-column-automation-footer");if(!o)return;const s=e(o,".js-project-column-automation-summary");t.automation_summary&&t.purpose?(s.textContent=t.purpose,s.setAttribute("aria-label",t.automation_summary),o.classList.remove("d-none")):o.classList.add("d-none")}function z(t,n,o,s){t.setAttribute("data-column-id",n),t.setAttribute("data-column-name",o),t.href=`#column-${n}`,e(t,".js-column-nav-name").textContent=o;const r=e(t,".js-column-nav-card-count");r.textContent=s,r.setAttribute("aria-label",`Contains ${s} ${1===Number(s)?"item":"items"}`)}function G(t,n,o,s,r,c){const i=t.content.cloneNode(!0),a=e(i,".js-project-column-navigation-item",HTMLAnchorElement);a.classList.toggle("selected",c),z(a,o,s,r);const l=n.querySelectorAll(".js-project-column-navigation-item").length+1;e(i,".js-column-nav-index").textContent=l.toString(),n.appendChild(i)}function J(t,e,n){const o=document.createDocumentFragment();for(const s of e)o.appendChild(n[s]);t.innerHTML="",t.appendChild(o)}const Q=H((async function(t,o){U(o.message);const s=t.querySelectorAll(".js-project-column"),r=R(s),c=t.getAttribute("data-url")||"",i=t.getAttribute("data-columns-url")||"",a=t.getAttribute("data-cards-url")||"",l=o.state||await n(c);q(t,"will-update-project",l);const u=document.activeElement;if(function(t,e){const n=Array.from(t.querySelectorAll(".js-project-column")).map(t=>t.getAttribute("data-id"));return e.columns.map(t=>String(t.id)).join(",")!==n.join(",")}(t,l)){q(t,"will-update-project-columns");const n={},o=document.createDocumentFragment();for(const t of l.columns){const e=W(t,i),s=e.querySelector(".js-project-column-cards");s&&(n[s.id]=s.scrollTop),o.appendChild(e)}const c=t.querySelector(".js-new-project-column-container");c&&c.remove();const a=e(t,".js-new-column-blankslate");if(a.remove(),t.innerHTML="",t.appendChild(o),c){t.appendChild(c),e(c,".js-new-column-button").classList.toggle("d-none",0===l.columns.length)}t.appendChild(a),a.classList.toggle("d-none",l.columns.length>0),function(t){const n=document.querySelector(".js-project-column-nav");if(!n)return;const o=e(n,".js-column-nav-template",HTMLTemplateElement),s=n.scrollLeft;let r;for(const e of document.querySelectorAll(".js-project-column-navigation-item"))e.remove(),e.classList.contains("selected")&&(r=e.getAttribute("data-column-id"));for(const e of t)G(o,n,e.id.toString(),e.name,e.card_ids.length.toString(),r===e.id.toString());n.scrollLeft=s}(l.columns);for(const t in n){const e=document.getElementById(t);if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/project-updater.ts:223");e.scrollTop=n[t]}await K(s,r)}const d=t.querySelectorAll(".js-project-column-card"),m=R(d),p={};for(const e of l.columns)for(const t of e.card_ids)p[t]=O(t.toString(),a);for(const n of l.columns){const t=document.getElementById(`column-${n.id}`);if(!t||"INCLUDE-FRAGMENT"===t.tagName)return;const o=t.querySelector(".js-project-column-name");if(o){o.textContent=n.name;const e=t.querySelector(".js-project-column-name-field");e instanceof HTMLInputElement&&(e.value=n.name,e.setAttribute("value",n.name))}const s=t.querySelector(".js-column-card-count");s&&(s.textContent=n.card_ids.length.toString()),V(n,t),J(e(t,".js-project-column-cards"),n.card_ids,p)}q(t,"update-project"),await K(d,m),u&&document.activeElement!==u&&u.focus()}),100);const X=["assignee","author","is","label","milestone","repo","review","state","status","type","linked"],Y={pr:"issue"},Z=["issue","pr","note"],tt=["assignee","label","milestone"],et=/[^\s:]+:("(?:\\"|.)*?"|[^\s]*)|[^\s]+/g;function nt(t,e){let n=t[e];return n||(n={tokenFilters:[],matchIfMissing:!1},t[e]=n),n}function ot(t,e,n){const o=t.tokenFilters.find(t=>t.token===e);o?o.negated=n:t.tokenFilters.push({token:e,negated:n}),t.matchIfMissing=!1}function st(t,e){const n=`^-?${e}:\\s*"?(.*?)"?\\s*$`;return t.replace(new RegExp(n),"$1").replace(/\\(")/g,"$1")}function rt(t){const e=t.match(et)||[],n={};for(const o of e){const t=X.find(t=>o.match(new RegExp(`^-?${t}:.*`)));if(t){const s=st(o,t);if(s.length>0){if(ot(nt(n,t),s,o.startsWith("-")),"linked"!==t)continue;const r=Y[s],c=t=>t.some(t=>{const e=st(t,"is");return t!==e&&Z.includes(e)});if(r&&!c(e)){ot(nt(n,"is"),r,!1)}}}else{const t=tt.find(t=>o===`no:${t}`);if(t)nt(n,t).matchIfMissing=!0;else if(o.length>0){ot(nt(n,"title"),o,!1)}}}return n}let ct,it;function at(){return e(document,".js-card-filter-input",HTMLInputElement).value.trim().toLowerCase()}function lt(t,e){for(const o in e){const s=t.getAttribute(`data-card-${o}`)||"";let r=[];""!==s.trim()&&(r=JSON.parse(s));const c=e[o];if(c.matchIfMissing){if(r.length>0)return!1}else for(const t of c.tokenFilters)if("title"===o){if(!ut(t.token,r))return!1}else{if("linked"===o&&!Y[t.token])return!1;const e=(n=t.token,-1!==r.indexOf(n));if(t.negated){if(e&&r.length>0)return!1}else if(!e)return!1}}var n;return!0}function ut(t,e){return e.some(e=>e.startsWith(t))}function dt(){const t=at();for(const n of document.querySelectorAll(".js-project-columns-container .js-project-column")){const o=e(n,".js-filtered-column-card-count");if(t.length>0){const t=n.querySelectorAll(".js-project-column-card:not(.d-none)").length;o.textContent=`${t.toString()} result${1!==t?"s":""}`}o.classList.toggle("d-none",0===t.length)}}function mt(t){const e=function(){const t=at();return it!==t&&(it=t,ct=rt(t)),ct}();let n=lt(t,e);if(!n)for(const o of t.querySelectorAll(".js-issue-note, .js-issue-note-reference"))if(n=lt(o,e),n)break;t.classList.toggle("d-none",!n)}function pt(){const t=e(document,".js-card-filter-input",HTMLInputElement),n=at();e(document,".js-card-filter-clear").classList.toggle("d-none",0===n.length),function(t,e){const n=new URL(window.location.href,window.location.origin),r=new URLSearchParams(n.search.slice(1));""===e?r.delete(t):r.set(t,e),n.search=r.toString(),o(s(),document.title,n.toString())}(t.name,n),function(t,e){for(const n of document.querySelectorAll(".js-project-fullscreen-link")){const o=new URL(n.getAttribute("href")||"",window.location.origin),s=new URLSearchParams(o.search.slice(1));""===e?s.delete(t):s.set(t,e),o.search=s.toString(),n.setAttribute("href",o.toString())}}(t.name,n)}function jt(){for(const t of document.querySelectorAll(".js-project-columns-container .js-project-column-card"))mt(t);dt(),pt()}const ft=/:"[^"]*"?$/,ht=/(^|\s+)[^\s:]+$/,gt=/^(\s|$)/;function vt(t){!function(t){if(document.activeElement!==t)return!1;const e=t.value.slice(0,t.selectionEnd),n=t.value.slice(t.selectionEnd),o=0===t.value.trim().length;if(ft.test(e))return!1;const s=ht.test(e)&&gt.test(n);return o||s}(t)?yt():function(t){const n=document.querySelector(".js-card-filter-suggester");if(n instanceof HTMLElement){n.classList.add("js-active-navigation-container"),n.classList.remove("d-none");const o=(t.value.slice(0,t.selectionEnd).match(Lt)||[])[0],s=e(n,".js-card-filter-suggester-helper-container"),r=e(s,".js-card-filter-suggester-helper");bt.test(t.value)?(r.textContent=t.value,s.classList.remove("d-none")):s.classList.add("d-none");const c=e(n,".js-card-filter-suggestions-header");let i=!1;for(const t of n.querySelectorAll(".js-card-filter-suggestion")){const e=t.getAttribute("data-value");e&&e.startsWith(o)?(t.classList.remove("d-none"),i=!0):t.classList.add("d-none")}c.classList.toggle("d-none",!i)}}(t)}const bt=/(^|\s)[^\s:]+$/,Lt=/\S*$/;function yt(){const t=document.querySelector(".js-card-filter-suggester");t instanceof HTMLElement&&(t.classList.remove("js-active-navigation-container"),t.classList.add("d-none"))}function Ct(t){const n=e(document,".js-card-filter-input",HTMLInputElement),o=n.value;let s=t,r=!0;o.indexOf(s)>=0?(r=!1,s=o.replace(s,"")):o.length&&(s=`${o.trim()} ${s}`),n.value=s,function(t,e){for(const n of document.querySelectorAll(".js-card-filter[data-card-filter]"))n.getAttribute("data-card-filter")===e&&n.setAttribute("aria-pressed",t.toString())}(r,t),jt()}const wt=!navigator.userAgent.match(/Macintosh/);function Et(t){switch(t){case" ":return"Space";case"ArrowUp":case"k":case"K":return"up";case"ArrowDown":case"j":case"J":return"down";case"ArrowLeft":case"h":case"H":return"left";case"ArrowRight":case"l":case"L":return"right";case"Enter":return"confirm";case"Escape":return"cancel";default:return t}}class Tt{constructor(t,e){this.item=t,this.onDone=e,this.moved=!1,this.moveInProgress=!1,this.blurring=!1,this.blurListener=this.handleBlur.bind(this),this.item.addEventListener("blur",this.blurListener),this.item.classList.add("moving")}handleBlur(t){!this.moveInProgress&&t.relatedTarget&&(this.blurring=!0,this.cancel())}isMetaKeyPressed(t){return wt?t.ctrlKey:t.metaKey}inPendingColumn(){return null!=this.item.closest(".js-project-pending-cards")}findColumn(t){return t?document.querySelector(`.js-project-column[data-id="${t}"]`):null}findCard(t){if(!t)return null;let e=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`);return e||(e=document.querySelector(`.js-project-column-card[data-content-id="${t}"]`)),e}isColumn(t){return null!=t&&t.classList.contains("js-project-column")}getColumn(){return this.item.closest(".js-project-column")}getPane(){return this.item.closest(".js-project-pane")}getColumnName(){const t=this.getColumn(),e=t&&t.querySelector(".js-project-column-name");return e?e.textContent:""}getColumnsContainer(){return e(document,".js-project-columns-container")}getNextColumn(){const t=this.getColumn();if(t){const e=t.nextElementSibling;if(this.isColumn(e))return e}return null}getPreviousColumn(){const t=this.getColumn();if(t){const e=t.previousElementSibling;if(this.isColumn(e))return e}return null}getFirstColumn(){return this.getColumnsContainer().querySelector(".js-project-column")}getLastColumn(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return t[t.length-1]}getCardID(t){return t&&(t.getAttribute("data-card-id")||t.getAttribute("data-content-id"))||""}getColumnID(t){return t&&t.getAttribute("data-id")||""}isMoving(t){return t===this.item}updateAriaLabel(){}moveTransaction(t){try{this.moveInProgress=!0,t(this.item),this.blurring||(this.updateAriaLabel(),this.item.focus())}finally{this.moved=!0,this.moveInProgress=!1}}done(){this.item.removeEventListener("blur",this.blurListener),this.item.classList.remove("moving"),this.item.removeAttribute("aria-label"),this.onDone()}cancel(){}}class kt extends Tt{constructor(t,e,n){super(t,n),this.moveCard=e,this.pendingCard=this.inPendingColumn(),this.getPane()&&(this.paneColumnCards=t.closest(".js-project-column-cards")),this.columnID=this.getColumnID(this.getColumn()),this.previousCardID=this.getCardID(t.previousElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateStartListener=this.handleUpdateStart.bind(this),this.getColumnsContainer().addEventListener("will-update-project",this.updateStartListener),this.updateEndListener=this.handleUpdateEnd.bind(this),this.getColumnsContainer().addEventListener("update-project",this.updateEndListener)}updateAriaLabel(){const t=this.getCardIndex(),e=t>=0?`to position ${t+1} of ${this.getCardCount()}`:"",n=`in ${this.getColumnName()} column`;this.item.setAttribute("aria-label",`Moved card ${e} ${n}`.trim())}handleUpdateStart(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.ts:194");const e=this.getColumn();if(!e)return void this.done();if(!this.paneColumnCards&&!this.updatePreviousPosition(t.detail))return void this.done();const n=this.getColumnID(e);this.isColumnInState(t.detail,n)?this.updateSnapshot={columnID:n,indexInColumn:this.getCardIndex()}:this.done()}handleUpdateEnd(){const t=this.updateSnapshot;if(this.updateSnapshot=null,!t||!this.getColumn())return void this.done();const e=this.findCard(this.getCardID(this.item)),n=this.getColumnCards(this.findColumn(t.columnID));if(e&&n){this.moveToColumn(n);const o=n.children[t.indexInColumn];e!==o&&this.moveToBeforeCard(n,o)}}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(Et(t.key)){case"up":e?this.moveToTop():this.moveUp(),t.preventDefault();break;case"down":e?this.moveToBottom():this.moveDown(),t.preventDefault();break;case"left":e?this.moveToFirstColumn(t.shiftKey):this.moveLeft(t.shiftKey),t.preventDefault();break;case"right":e?this.moveToLastColumn(t.shiftKey):this.moveRight(t.shiftKey),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}updatePreviousPosition(t){if(!t||!t.columns)return!1;const e=this.getCardID(this.item);for(const n of t.columns)for(let t=0;t<n.card_ids.length;t++)if(e===n.card_ids[t].toString())return this.previousCardID=n.card_ids[t-1].toString(),this.columnID=n.id.toString(),!0;return!1}isColumnInState(t,e){if(!t||!t.columns)return!1;for(const n of t.columns)if(e===n.id.toString())return!0;return!1}getCardIndex(){const t=this.getColumnCards(this.getColumn());return t?Array.from(t.children).indexOf(this.item):-1}getCardCount(){const t=this.getColumnCards(this.getColumn());return t?t.querySelectorAll(".js-project-column-card").length:0}getColumnCards(t){return null!=t?t.querySelector(".js-project-column-cards"):null}moveToBeforeCard(t,e){this.moveTransaction((function(n){t.insertBefore(n,e)}))}moveToColumn(t){this.moveTransaction((function(e){t.appendChild(e)}))}moveUp(){const t=this.item.previousElementSibling,e=this.getColumnCards(this.getColumn());t&&e&&this.moveToBeforeCard(e,t)}moveToTop(){const t=this.getColumnCards(this.getColumn());t&&this.moveTransaction((function(e){t.prepend(e)}))}moveDown(){const t=this.item.nextElementSibling,e=this.getColumnCards(this.getColumn());if(t&&e){const n=t.nextElementSibling;n?this.moveToBeforeCard(e,n):this.moveToBottom()}else this.moveToBottom()}moveToBottom(){const t=this.getColumnCards(this.getColumn());t&&this.moveToColumn(t)}moveToFirstColumn(t){const e=this.getColumnCards(this.getFirstColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveToLastColumn(t){const e=this.getColumnCards(this.getLastColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveLeft(t){const e=this.getColumnCards(this.getPane()?this.getLastColumn():this.getPreviousColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveRight(t){const e=this.getColumnCards(this.getNextColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project",this.updateStartListener),this.getColumnsContainer().removeEventListener("update-project",this.updateEndListener)}confirm(){if(this.moved){let t=this.findColumn(this.columnID);this.pendingCard&&!t&&(t=document.querySelector(".js-project-pending-cards-container.js-project-column")),this.moveCard(this.item,t,{keyboardMove:!0})}this.done()}cancel(){let t,e;if(this.moved)if(this.previousCardID){const n=this.findCard(this.previousCardID);n&&(t=n.closest(".js-project-column-cards"),e=n.nextElementSibling)}else this.columnID?(t=this.getColumnCards(this.findColumn(this.columnID)),t&&(e=t.firstElementChild)):this.paneColumnCards&&(t=this.paneColumnCards,e=t.firstElementChild);t&&(e?this.moveToBeforeCard(t,e):this.moveToColumn(t)),this.done()}}class At extends Tt{constructor(t,e,n){super(t,n),this.moveColumn=e,this.nextColumnID=this.getColumnID(t.nextElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateListener=this.done.bind(this),this.getColumnsContainer().addEventListener("will-update-project-columns",this.updateListener)}updateAriaLabel(){const t=this.getColumnIndex(),e=t>=0?`to position ${t+1} of ${this.getColumnCount()}`:"";this.item.setAttribute("aria-label",`Moved ${this.getColumnName()} column ${e}`.trim())}getColumnIndex(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return Array.from(t).indexOf(this.item)}getColumnCount(){return this.getColumnsContainer().querySelectorAll(".js-project-column").length}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(Et(t.key)){case"left":e?this.moveToFirstColumn():this.moveLeft(),t.preventDefault();break;case"right":e?this.moveToLastColumn():this.moveRight(),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}insertBefore(t){const e=this.getColumnsContainer();this.moveTransaction((function(n){e.insertBefore(n,t)}))}moveLeft(){const t=this.getPreviousColumn();t&&this.insertBefore(t)}moveRight(){const t=this.getNextColumn();if(t){const e=t.nextElementSibling;e&&this.isColumn(e)?this.insertBefore(e):this.moveToLastColumn()}else this.moveToLastColumn()}moveToFirstColumn(){const t=this.getFirstColumn();t&&this.insertBefore(t)}moveToLastColumn(){const t=this.getLastColumn();if(t){const e=t.nextElementSibling;e&&this.insertBefore(e)}}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project-columns",this.updateListener)}confirm(){this.moved&&this.moveColumn(this.item,{keyboardMove:!0}),this.done()}cancel(){if(this.moved){const t=this.findColumn(this.nextColumnID);t?this.insertBefore(t):this.moveToLastColumn()}this.done()}}let St;const Mt=document.querySelector(".js-client-uid");function xt(t,e){m(t,(async function(t,n,o){try{await e(t,n,o)}catch(s){throw s.response&&await qt("project-update-error"),s}}))}function Ht(t){g(t,"details-dialog",B).toggle(!1)}async function qt(t,n){const o=e(document,`#${t}`,HTMLTemplateElement),s=await p({content:o.content.cloneNode(!0),dialogClass:"project-dialog"});return n&&n.setAttribute("aria-expanded","true"),s.addEventListener("dialog:remove",(function(){n&&n.setAttribute("aria-expanded","false")}),{once:!0}),s}function It(t,n){const o=e(t,".js-column-card-count"),s=parseInt(o.textContent.trim()),r=t.getAttribute("data-id");let c,i=s+n;0===n&&(i=0),o.textContent=i.toString(),r&&(c=e(document,`.js-project-column-navigation-item[data-column-id="${r}"] .js-column-nav-card-count`),c.textContent=i.toString());const a=`Contains ${i} ${1===i?"item":"items"}`;o.setAttribute("aria-label",a),c&&c.setAttribute("aria-label",a)}function $t(t,e){const n=A(t,"keyboard_move");e&&!0===e.keyboardMove?n.value="true":n.value=""}function Dt(t,n,o){n&&(!function(t){t.classList.contains("js-project-pending-cards-container")&&0===t.querySelectorAll(".js-project-column-card").length&&t.remove()}(n),It(n,-1));const s=t.closest(".js-project-column");if(!s)return;const r=c(s,"data-id");t.setAttribute("data-column-id",r),It(s,1),function(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelector(".js-search-cards-next-page");if(e instanceof HTMLInputElement){null==t.querySelector(".js-project-column-card")&&(e.value="1")}}}();const i=e(s,".js-project-content-form",HTMLFormElement);i.reset(),function(t,e){const n=A(t,"card_id"),o=A(t,"content_id"),s=A(t,"content_type");if(!e)return n.value="",o.value="",void(s.value="");const r=e.getAttribute("data-card-id");r?(n.value=r,o.value="",s.value=""):(n.value="",o.value=c(e,"data-content-id"),s.value=c(e,"data-content-type")),A(t,"client_uid").value=St}(i,t);const a=t.previousElementSibling,l=A(i,"previous_card_id");l.value=a?c(a,"data-card-id"):"",$t(i,o),j(i)}function _t(t){const e=t.item;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.ts:190");if(e.closest(".js-project-triage-pane"))return;const n=t.from;Dt(e,n&&n.closest(".js-project-column")),e.focus()}function Bt(t){const e=t.closest(".js-project-column");e&&It(e,-1),t.remove()}Mt&&(St=c(Mt,"data-uid"));const Pt=/^#card-(\d+)$/;function Rt(t,n){const o=e(document,".js-reorder-columns-form",HTMLFormElement);A(o,"column_id").value=c(t,"data-id");const s=t.previousElementSibling,r=A(o,"previous_column_id");r.value=s?c(s,"data-id"):"",$t(o,n),j(o)}function Ft(t){if(t.related&&!t.related.matches(".js-project-column"))return!1}function Kt(t){const e=t.item;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.ts:252");Rt(e),e.focus()}function Nt(){const t=document.querySelector(".js-project-search-form");t instanceof HTMLFormElement&&j(t)}function Ut(){const t=document.querySelector(".js-project-archived-cards-search-form");t instanceof HTMLFormElement&&j(t)}function Wt(t,e,n){let o;return t&&(o=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`)),!o&&e&&n&&(o=document.querySelector(`.js-project-column-card[data-content-type="${n}"][data-content-id="${e}"]`)),o}var Ot,Vt;function zt(t){const n=e(document,".js-new-project-column-container"),o=e(document,".js-new-column-blankslate"),s=e(n,".js-new-column-button");o.classList.toggle("d-none",!t),s.classList.toggle("d-none",t),t&&Gt(".js-project-triage-pane",!1)}function Gt(t,e){for(const n of document.querySelectorAll(".js-project-header, .js-project-columns, .js-project-pane, .js-project-small-footer"))n.classList.toggle("hide-sm",e);for(const n of document.querySelectorAll(".js-project-columns"))n.classList.toggle("push-board-over",e);for(const n of document.querySelectorAll(t))n.classList.toggle("d-none",!e),n.classList.toggle("hide-sm",!e)}function Jt(t){const e=document.querySelector(".js-project-archived-cards-results");if(e){const n=c(e,"data-project-archived-cards-url"),o=new URL(n,window.location.origin),s=new URLSearchParams(o.search.slice(1));t&&s.append("card_id",t),o.search=s.toString(),e.setAttribute("src",o.toString())}}function Qt(t,n){e(document,".js-show-triage-field",HTMLInputElement).value=n?"show":"",Nt()}function Xt(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelectorAll(".js-project-column-card"),n={};for(const t of e){const e=t.getAttribute("id");e&&(n.hasOwnProperty(e)&&t.remove(),n[e]=!0)}}}function Yt(t){const e=t.closest(".js-details-container");e&&e.classList.remove("open","Details--on")}function Zt(t){if(!(t instanceof KeyboardEvent))throw new Error("invariant: app/assets/modules/github/projects.ts:748");if("Escape"===L(t)){if(!(t.currentTarget instanceof Element))throw new Error("invariant: app/assets/modules/github/projects.ts:750");Yt(t.currentTarget)}}function te(t){const n=t.closest(".js-project-column");if(!n)return;const o=t.value;if(t.setAttribute("data-preview-text",o),/(gh-|issues\/|pull\/|projects\/|discussions\/|#)\d+/.test(o)){const t=e(n,".js-preview-note-form",HTMLFormElement);A(t,"note").value=o,j(t)}else e(n,".js-note-preview").innerHTML=""}function ee(t){S(t);const n=e(t,".js-task-list-field",HTMLTextAreaElement);n.defaultValue=n.value;for(const e of v(t,".task-list-item-checkbox",HTMLInputElement))e.defaultChecked=e.checked}$("change",".js-toggle-linked-repo-scope",(function(t){const n=t.currentTarget;if(!(n instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/projects.ts:284");const o=n.form;if(!o)throw new Error("invariant: app/assets/modules/github/projects.ts:286");const s=e(o,".js-project-triage-search-text",HTMLInputElement),r=s.value||"";let c;c=n.checked?r.replace(/(\s|^)repo:[^\s]*\s*/gi,"$1").trim():`${r.trim()} repo:*`,c!==r&&(s.value=c,j(o))})),$("click",".js-project-show-all-archived-cards",Ut),xt(".js-project-update-card",(async function(t,n){const o=await n.html(),s=e(o.html,"*"),r=Wt(s.getAttribute("data-card-id"),s.getAttribute("data-content-id"),s.getAttribute("data-content-type")),c=!(!r||r!==r.ownerDocument.activeElement);r&&r.replaceWith(s),c&&s.focus()})),Ot="project-clone-error",Vt=async function(t,n){const o=await n.json(),s=o.json.project_url,r=o.json.job_status_url;try{await f(r),window.location=s}catch(c){if(s){const t=await qt("project-clone-partial-error");e(t,".js-cloned-board-link").setAttribute("href",s)}else await qt("project-clone-error")}},m(".js-project-clone-form",(async function(t,n,o){const s=e(t,".form-actions"),r=e(t,".js-project-loader");s.classList.add("d-none"),r.classList.remove("d-none");try{await Vt(t,n,o)}catch(c){throw c.response&&await qt(Ot),s.classList.remove("d-none"),r.classList.add("d-none"),c}})),xt(".js-convert-note-to-issue-form",(async function(t,n){try{await n.text(),Ht(t)}catch(o){if(!function(t){try{return t&&t.json&&"note_already_converted_to_issue"===t.json.error_code}catch(o){return!1}}(o.response))throw o;{const n=e(t,".js-convert-note-error-container");n.innerHTML="",n.append(h(document,o.response.json.error_html))}}})),xt(".js-change-project-state-form",(async function(t,e){const n=document.activeElement;n instanceof HTMLElement&&t.contains(n)&&n.blur(),await e.text(),Ht(t)})),$("click",".js-add-project-description",(async function(){const t=await qt("edit-project");e(t,"#edit-project-name").removeAttribute("autofocus"),e(t,"#edit-project-body").setAttribute("autofocus","")})),$("click",".js-project-target-owner",(function(t){const n="repository"===c(t.currentTarget,"data-owner-type"),o=g(t.currentTarget,".js-project-clone-dialog");if(e(o,".js-project-clone-visibility").classList.toggle("d-none",n),n){e(o,".js-project-clone-private",HTMLInputElement).checked=!0}})),$("click",".js-refresh-project",(function(){window.location.reload()})),xt(".js-create-project-column",(async function(t,n){const o=await n.html(),s=e(o.html,"*");if(s.classList.contains("js-column-form-container")){g(t,".js-column-form-container").replaceWith(s),oe()}else{e(document,".js-new-project-column-container").before(o.html),Ht(t),function(t){const n=document.querySelector(".js-project-column-nav");n&&G(e(n,".js-column-nav-template",HTMLTemplateElement),n,t.getAttribute("data-id")||"",e(t,".js-project-column-name").textContent,e(t,".js-column-card-count").textContent,!0)}(s);const n=s.getAttribute("data-id");n&&(ae(n),ie(n),le()),e(document,".js-new-column-blankslate").classList.contains("d-none")||zt(!1)}})),xt(".js-update-project-column",(async function(t,n){const o=await n.html(),s=e(o.html,"*");if(s.classList.contains("js-column-form-container")){g(t,".js-column-form-container").replaceWith(s),oe()}else{const n=c(t,"data-column-id");e(document,`.js-project-column[data-id="${n}"]`).replaceWith(s),function(t){const n=t.getAttribute("data-id");if(!n)return;const o=document.querySelector(`.js-project-column-navigation-item[data-column-id="${n}"]`);if(o instanceof HTMLAnchorElement){z(o,n,e(t,".js-project-column-name").textContent,e(t,".js-column-card-count").textContent)}}(s),Ht(t)}})),xt(".js-delete-project-column",(async function(t,n){await n.text();const o=c(t,"data-column-id"),s=v(document,".js-project-column",HTMLElement);e(document,`.js-project-column[data-id="${o}"]`).remove(),Ht(t),function(t){for(const e of document.querySelectorAll(".js-project-column-navigation-item"))if(t===e.getAttribute("data-column-id"))return void e.remove()}(o),1===s.length&&zt(!0)})),xt(".js-archive-project-column",(async function(t,n){await n.text();const o=c(t,"data-column-id");!function(t){e(t,".js-project-column-cards").innerHTML="",It(t,0)}(e(document,`.js-project-column[data-id="${o}"]`)),Ht(t)})),D(".js-project-column-card, .js-project-column",{constructor:HTMLElement,initialize(t){t.id===document.location.hash.substr(1)&&setTimeout(()=>{document.querySelector(".js-project-page-mobile")||t.focus()},1)}}),xt(".js-remove-card-after-request",(async function(t,e){await e.text(),Bt(g(t,".js-project-column-card")),Nt()})),xt(".js-archive-project-card",(async function(t,e){Bt(g(t,".js-project-column-card")),await e.text(),Ut()})),xt(".js-unarchive-project-card",(async function(t,e){const n=g(t,".js-project-column-card"),o=c(n,"data-column-id"),s=document.querySelector(`.js-project-column[data-id="${o}"] .js-project-column-cards`);s&&(s.append(n),Dt(n),n.focus()),e.text()})),xt(".js-project-archived-cards-search-form",(async function(t,n){const o=g(t,".js-project-archived-cards-pane"),s=e(o,".js-project-column-cards");let r;s.textContent="Loadingâ€¦",t.classList.add("loading");try{r=await n.html()}catch(c){}s.innerHTML="",r&&s.append(r.html),t.classList.remove("loading")})),i((async function({target:t}){if(t instanceof HTMLElement)t.matches(".js-project-column-card")?t.focus():t.matches(".js-project-column")&&(ae(c(t,"data-id")),le());else if(document.location.hash.length>0){const t=function(){const t=document.location.hash.match(Pt);return t?t[1]:null}();if(null!=t){const n=document.querySelector(".js-project-archived-cards-pane");if(n){const o=c(n,"data-project-archived-card-url");let s;try{s=await b(o.replace("{card_id}",t))}catch(e){}null!=s&&(Jt(t),Gt(".js-project-archived-cards-pane",!0))}}}})),$("click",".js-show-project-triage",(function(){Gt(".js-project-pane",!1),Gt(".js-project-menu-pane",!0),Gt(".js-project-triage-pane",!0);const t=e(document,".js-project-triage-pane");t.addEventListener("animationend",(function(){e(t,".js-project-triage-search-text",HTMLInputElement).focus()}),{once:!0})})),$("click",".js-show-archived-cards",(function(){Jt(),Gt(".js-project-pane",!1),Gt(".js-project-menu-pane",!0),Gt(".js-project-archived-cards-pane",!0)})),$("click",".js-show-project-menu",(function(){!function(){const t=document.querySelector(".js-project-activity-results");if(t){const e=c(t,"data-project-activity-url"),n=new URL(e,window.location.origin);t.setAttribute("src",n.toString())}}(),Gt(".js-project-pane",!1),Gt(".js-project-menu-pane",!0)})),$("click",".js-hide-project-menu",(function(){Gt(".js-project-pane",!1)})),$("click",".js-show-triage",(function(t){Qt(0,!0)})),$("click",".js-hide-triage",(function(t){Qt(0,!1)})),xt(".js-project-search-form",(async function(t,n){if(function(t){const n=t.querySelector(".js-toggle-linked-repo-scope"),o=e(t,".js-project-triage-search-text",HTMLInputElement);return!!(n instanceof HTMLInputElement&&n.checked)&&function(t,e){return null!=rt(t)[e]}(o.value,"repo")}(t)){e(t,".js-toggle-linked-repo-scope",HTMLInputElement).checked=!1}t.classList.add("loading");const o=await n.html(),s=g(t,".js-project-triage-pane"),r=e(s,".js-project-search-results");r.innerHTML="",r.append(o.html),t.classList.remove("loading")})),xt(".js-project-activity-form",(async function(t,e){const n=await e.html(),o=g(t,".js-project-activity-pane"),s=o.querySelector(".js-project-activity-container");if(s){if(!(s instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.ts:699");s.innerHTML="",s.append(n.html)}if(o){if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.ts:704");o.classList.remove("Details--on")}})),D(".js-project-column-card",(function(t){if(t.getAttribute("data-card-id")){const e=c(t,"data-content-type"),n=c(t,"data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}})),D(".js-more-search-cards-form",{subscribe:t=>a(t,"page:loaded",Xt)}),$("click",".js-dismiss-note-form-button",(function(t){Yt(t.currentTarget)})),r(".js-note-text",(function(t){const e=t;if(!(e instanceof HTMLTextAreaElement))throw new Error("invariant: app/assets/modules/github/projects.ts:775");l(e,te),e.addEventListener("blur",(function(){y(e,te)}),{once:!0})})),D(".js-project-note-form",{subscribe:t=>a(t,"keyup",Zt)}),xt(".js-preview-note-form",(async function(t,n){const o=g(t,".js-project-column"),s=e(o,".js-note-text",HTMLTextAreaElement),r=e(o,".js-note-preview");let c;try{c=(await n.html()).html}catch(i){}r.innerHTML="",c&&s.getAttribute("data-preview-text")===s.value&&r.appendChild(c)})),$("tab-container-changed",".js-project-picker-tabs",(async function(t){if(!(t instanceof CustomEvent))return;const n=t.currentTarget,o=e(n,"remote-input",P);o.setAttribute("aria-owns",t.detail.relatedTarget.id),o.src=c(t.detail.relatedTarget,"data-filter-url")})),xt(".js-project-note-form",(async function(t,n){const o=e(t,"textarea",HTMLTextAreaElement);o.disabled=!0;const s=e(t,"button",HTMLButtonElement);s.disabled=!0;const r=t.closest(".js-project-column");if(r){e(r,".js-note-text").removeAttribute("data-preview-text")}let i;try{i=await n.html()}catch(a){if(i=a.response,r&&i&&409===i.status&&i.html){const t=e(r,".js-note-preview");t.innerHTML="",t.appendChild(i.html)}return i&&422===i.status&&await qt("project-update-error"),s.disabled=!1,o.blur(),o.disabled=!1,void o.focus()}if(r){e(r,".js-note-preview").innerHTML="",function(t,n){e(t,".js-project-column-cards").prepend(n),It(t,1)}(r,i.html)}else!function(t,e){const n=e.querySelector("*");if(!n||!n.classList.contains("js-note-form-container")){const n=c(t,"data-card-id"),o=document.getElementById(`card-${n}`);o&&o.replaceWith(e),t.reset(),Ht(t)}else g(t,".js-note-form-container").replaceWith(e)}(t,i.html);o.blur(),o.disabled=!1,C(o,""),o.focus()})),xt(".js-project-column-card .js-comment-update",(async function(t,n,o){const s=g(t,".js-task-list-container"),r=g(t,".js-project-column-card"),i=c(t,"data-note-version");let a;o.headers.set("X-Note-Version",i);try{a=await n.json()}catch(d){if(a=d.response,a&&422===a.status&&a.json.stale)return U(a.json.message),ee(s),void w(r);throw d}t.setAttribute("data-note-version",a.json.note_version);const l=a.json.note;e(s,".js-task-list-field",HTMLTextAreaElement).value=l;const u=e(r,".js-edit-note-template",HTMLTemplateElement);e(u.content,".js-edit-note-input",HTMLTextAreaElement).textContent=l,ee(s)}));const ne=H((function(){dt(),pt()}),1);async function oe(t){const n=document.querySelector(".js-project-column-automation");if(!n)return;const o=g(n,".js-column-settings-form"),s=e(n,".js-project-automation-options",I),r=e(o,".js-project-autmoation-loader"),i=e(o,".js-column-purpose-details"),a=t||c(n,"data-src");function l(t){i.hidden=t,r.hidden=!t}s.src=a,s.addEventListener("loadstart",()=>l(!0)),s.addEventListener("loadend",()=>l(!1))}function se(t){return t.matches(".js-drag-by-handle")?"position-fixed":void 0}function re(t){return t.matches(".js-drag-by-handle")?".js-project-dragger":void 0}function ce(){let t;if(document.location.hash.startsWith("#column-")&&(t=document.getElementById(document.location.hash.substr(1))),t||(t=document.querySelector(".js-project-column")),t){const e=t.getAttribute("data-id");e&&(ae(e),le())}}function ie(t){if(!document.querySelector(".js-project-page-mobile"))return;const e=document.createElement("a");e.href=`#column-${t}`,o(null,"",e.href)}function ae(t){for(const e of document.querySelectorAll(".js-project-column"))e.classList.toggle("hide-sm",t!==e.getAttribute("data-id")),t===e.getAttribute("data-id")?e.setAttribute("data-active-column",""):e.removeAttribute("data-active-column");for(const e of document.querySelectorAll(".js-project-column-navigation-item"))e.classList.toggle("selected",t===e.getAttribute("data-column-id"))}function le(){const t=document.querySelector(".js-project-column-navigation-item.selected");if(!t)return;const e=g(t,".js-project-column-nav"),n=t.offsetLeft,o=t.offsetWidth,s=n+o,r=window.innerWidth;(s-e.scrollLeft>r||s<e.scrollLeft)&&(e.scrollLeft=n-r/2+o/2)}function ue(){const t=e(document,".js-project-issue-body-wrapper"),n=e(document,".js-project-issue-body-container"),o=t.getBoundingClientRect().height,s=n.getBoundingClientRect().height>o;e(document,".js-project-issue-body-blur").classList.toggle("d-none",!s),e(document,".js-project-issue-body-details-target").classList.toggle("d-none",!s)}async function de(t,n){const o=document.querySelector(".js-project-card-details-pane");if(!o)return!1;const s=c(t,"href"),r=e(o,".js-project-card-details"),i=t.closest(".js-project-pane"),a=null!=i;if(Gt(".js-project-card-details-pane",!0),e(o,".js-project-card-details-header").classList.toggle("d-none",!a),i&&function(t,n){const o=e(t,".js-project-card-details-back-template",HTMLTemplateElement).content.cloneNode(!0),s=c(n,"data-back-to-label"),r=c(n,"data-back-to-class");e(o,".js-project-card-details-back-to-title").textContent=s,e(o,".js-project-card-details-back-link").classList.add(r);const i=e(t,".js-project-card-details-back-container");i.innerHTML="",i.appendChild(o)}(o,i),s===r.getAttribute("data-issue-url"))return void(n&&me());const l=function(t,n){const o=g(t,".js-project-issue-details-container"),s=e(document,".js-project-card-details-loader-template",HTMLTemplateElement).content.cloneNode(!0),r=e(o,".js-issue-octicon",SVGElement).classList.contains("open");e(s,".js-issue-title").textContent=t.textContent,e(s,".js-issue-number").textContent=e(o,".js-issue-number").textContent,e(s,".js-issue-state").textContent=r?"Close":"Reopen";const i=c(t,"data-content-label");for(const e of v(s,".js-issue-type"))e.textContent=i;for(const e of v(s,".js-project-card-details-external-link"))e.setAttribute("href",t.getAttribute("href")||"#"),e.setAttribute("data-ga-click",`Project board, go to ${i}, location:sidebar`);e(s,".js-hide-project-menu").classList.toggle("d-none",n);const a=e(s,".js-issue-repository");a.textContent=c(t,"data-content-repo-label"),a.setAttribute("href",t.getAttribute("data-content-repo-url")||"#");const l=e(s,".js-project-card-details-loader-octicon");return l.innerHTML="",l.appendChild(e(o,".js-issue-octicon",Element).cloneNode(!0)),s}(t,a);let u;r.innerHTML="",r.appendChild(l),r.setAttribute("data-issue-url",s);try{u=await M(document,`${s}/show_from_project`)}catch(d){return void function(t,n){e(t,".js-project-card-details-error").classList.remove("d-none"),e(t,".js-project-card-details-loader").classList.add("d-none"),e(t,".js-project-card-details-retry").addEventListener("click",(function(){t.removeAttribute("data-issue-url"),de(n,!1)}),{once:!0})}(r,t)}if(r.getAttribute("data-issue-url")===s){const t=u.querySelector(".js-hide-project-menu");t&&t.classList.toggle("d-none",a),r.innerHTML="",r.appendChild(u),ue(),n&&me()}}function me(){const t=document.querySelector(".js-project-card-details-pane");t&&e(t,".js-project-card-details-external-link").focus()}function pe(t){if("d"!==t.key)return;const e=t.currentTarget;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.ts:1481");const n=e.querySelectorAll(".js-project-card-issue-link");1===n.length&&(de(n[0],!0),t.preventDefault())}function je(){const t=e(document,".js-project-create-linked-repo-list"),n=e(t,".js-blankslate"),o=e(document,".js-project-create-linked-repo-search-input-group"),s=e(document,".js-project-create-linked-repo-max"),r=v(t,".js-project-repo-link-badge").length,c=r>=parseInt(s.getAttribute("data-max"),10);o.classList.toggle("d-none",c),s.classList.toggle("d-none",!c),n.classList.toggle("d-none",r>0)}$("click",".js-card-filter-clear",(function(){const t=e(document,".js-card-filter-input",HTMLInputElement);t.value="",q(t,"input")})),$("change",".js-column-purpose-value",(function(t){if(!(t.currentTarget instanceof HTMLInputElement))throw new Error("invariant: app/assets/modules/github/projects.ts:936");oe(c(t.currentTarget,"data-preset-url"))})),D(".project-dialog .js-project-column-automation",(function(){oe()})),D(".js-project-column-card",{constructor:HTMLElement,add(t){mt(t),ne()},remove:ne}),D(".js-card-filter-input",{constructor:HTMLInputElement,add(t){t.addEventListener("input",H(jt,500)),l(t,(function(){vt(t)}))}}),$("focusin",".js-card-filter-input",(function(t){t.currentTarget instanceof HTMLInputElement&&vt(t.currentTarget)})),$("focusout:delay",".js-card-filter-input",(function(){yt()})),$("click",".js-card-filter-suggestion",(function(){e(document,".js-card-filter-input",HTMLInputElement).focus()})),$("click",".js-card-filter",(function(t){const e=t.currentTarget.getAttribute("data-card-filter");e&&Ct(e)})),$("navigation:keydown",".js-card-filter-suggester",(function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.ts:1000");switch(L(t.detail.originalEvent)){case"Escape":t.preventDefault(),yt();break;case"ArrowLeft":case"ArrowRight":case"Enter":yt()}})),$("navigation:open",".js-card-filter-suggester",(function(t){const n=document.querySelector(".js-card-filter-input");if(n instanceof HTMLInputElement){const o=e(document,".js-card-filter-suggester"),s=c(t.target,"data-value"),r=n.value.slice(0,n.selectionEnd).replace(/\S+$/,""),i=n.value.slice(n.selectionEnd);o.classList.contains("d-none")||(t.preventDefault(),n.value=r+s+i,q(n,"input"),vt(n)),yt()}})),$("socket:message",".js-project-columns-container",(async function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.ts:1045");const e=t.detail.data;if(!function(t){const e=t.currentTarget;if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects.ts:1037");const n=t.detail.name,o=e.getAttribute("data-channel");return/^projects:\d+$/.test(n)&&n!==o}(t))if(St!==e.client_uid){const n=t.currentTarget;Nt(),Ut(),await E(),Q(n,e)}else"column_automation_updated"===e.action&&null!=e.state&&function(t){for(const e of t.columns){const t=document.getElementById(`column-${e.id}`);t&&V(e,t)}}(e.state)})),document.addEventListener("socket:message",(function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.ts:1064");const{data:n,name:o}=t.detail;if(n&&n.locked&&function(){const t=document.querySelector(".js-project-lock-container");if(t){const n=e(t,".Popover"),o=n.classList.contains("d-none");if(n.classList.toggle("d-none",!0),!o){const e=document.activeElement;if(t.contains(e)){const t=document.querySelector(".js-project-header");t&&t.focus()}}}}(),n&&n.is_project_activity){const t=document.querySelector(".js-project-activity-pane");t&&t.classList.add("Details--on")}o&&o.startsWith("projects:metadata:")&&(document.title=n.name)})),D(".js-project-columns-drag-container",{constructor:HTMLElement,add(t){u.create(t,{animation:150,draggable:".js-project-column",filter:".js-note-text, .js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:se(t),handle:re(t),handleReplacedDragElement:!0,group:{name:"project-column",put:!1,pull:!1},onMove:Ft,onUpdate:Kt})}}),D(".js-card-drag-container",{constructor:HTMLElement,add(t){u.create(t,{animation:150,draggable:".js-project-column-card",filter:".js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:se(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:re(t),handleReplacedDragElement:!0,group:"project-card",onAdd:_t,onUpdate:_t})}}),D(".js-project-search-results-drag-container",{constructor:HTMLElement,add(t){u.create(t,{sort:!1,animation:150,draggable:".js-project-column-card",fallbackClass:se(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:re(t),group:{name:"project-card",put:!1,pull:!0},onAdd:_t,onUpdate:_t})}}),D(".js-project-column-card",(function(t){if(t.getAttribute("data-card-id")){const e=c(t,"data-content-type"),n=c(t,"data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}})),D(".js-client-uid-field",{constructor:HTMLInputElement,add(t){t.value=St}}),D(".js-project-column[data-active-column]",{remove(){document.querySelector(".js-project-column[data-active-column]")||ce()}}),$("click",".js-project-column-navigation-item",(function(t){t.preventDefault();const e=c(t.currentTarget,"data-column-id");ae(e),ie(e)})),$("click",".js-open-active-column-dialog",(function(t){const e=document.querySelector(".js-project-column[data-active-column]");if(e){const n=c(e,"data-id");qt(`${c(t.currentTarget,"data-dialog-prefix")}-${n}`)}})),$("click",".js-toggle-project-edit-mode",(function(t){if(t.currentTarget.classList.toggle("selected"),!document.body)throw new Error("invariant: app/assets/modules/github/projects.ts:1256");document.body.classList.toggle("project-edit-mode")})),$("click",".js-move-card-to-column-button",(function(t){const e=t.currentTarget.getAttribute("data-card-id"),n=t.currentTarget.getAttribute("data-content-id"),o=t.currentTarget.getAttribute("data-content-type"),s=c(t.currentTarget,"data-column-id"),r=Wt(e,n,o),i=document.querySelector(`.js-project-column[data-id="${s}"] .js-project-column-cards`);if(r&&i){t.currentTarget.hasAttribute("data-change-active-column")&&(ae(s),ie(s),le());const e=r.closest(".js-project-column");i.prepend(r),Dt(r,e)}})),$("click",".js-add-note-button",(function(t){t.preventDefault();const e=document.querySelector(".js-project-column[data-active-column] .js-add-note-container .js-details-target");e&&T(e)})),$("click",".js-project-lock-info-button, .js-close-project-lock-popover",(function(){const t=e(document,".js-project-lock-container .Popover"),n=t.classList.contains("d-none");t.classList.toggle("d-none",!n)})),x((function(t){t.matches(".js-project-card-details-pane .js-comment .js-comment-update")&&ue()})),$("click",".js-hide-project-card-details",(function(){const t=e(document,".js-project-card-details");t.removeAttribute("data-issue-url"),t.innerHTML=""})),r(".js-project-column-card",(function(t){t.addEventListener("keydown",pe),t.addEventListener("blur",(function(){t.removeEventListener("keydown",pe)}),{once:!0})})),$("click",".js-project-card-issue-link",(function(t){if(!(t instanceof MouseEvent))throw new Error("invariant: app/assets/modules/github/projects.ts:1513");(function(t){return!t.metaKey&&(!t.ctrlKey&&(!t.altKey&&(!t.shiftKey&&0===t.button)))})(t)&&(de(t.currentTarget,!1),t.preventDefault())})),xt(".js-project-card-issue-details-title",(async function(t,n){const o=g(t,".js-details-container"),s=await n.json();T(o),null!=s.json.issue_title&&(e(o,".js-issue-title").textContent=s.json.issue_title);for(const e of t.elements)(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(e.defaultValue=e.value)})),$("auto-complete-change",".js-project-create-repo-link-auto-complete",(function({target:t}){if(!(t instanceof _))throw new Error("invariant: app/assets/modules/github/projects.ts:1554");const n=t.querySelector(`.js-project-repo-link-badge[data-repo-name="${t.value}"]`);if(!n)return;const o=e(document,".js-project-create-linked-repo-list"),s=e(n,".js-repo-id",HTMLInputElement);let r=!1;for(const e of v(o,".js-repo-id",HTMLInputElement))if(e.value===s.value){r=!0;break}r||(s.disabled=!1,o.append(n),n.classList.remove("d-none")),t.value="",je()})),$("click",".js-remove-project-repo-link",(function(t){g(t.target,".js-project-repo-link-badge").remove(),je()})),d("keydown",".js-project-create-linked-repo-search",(function(t){"Enter"===t.key&&t.preventDefault()})),$("click",".js-project-dialog-button",(function({currentTarget:t}){qt(c(t,"data-dialog-id"),t)})),$("click",".js-project-card-closing-issue-summary",(function({currentTarget:t}){g(t,".js-project-column-card").focus()})),$("click",".js-project-active-column-dialog-button",(async function({currentTarget:t}){const n=c(t,"data-dialog-id");!function(t,n){const o=e(t,".js-move-card-to-column-dialog-body"),s=g(n,".js-project-column-card"),r=s.closest(".js-project-column"),i=r&&r.getAttribute("data-id"),a=e(document,"#move-card-to-column-button-template",HTMLTemplateElement),l=e(t,".js-move-card-to-column-title");l.textContent=s.closest(".js-project-archived-cards-pane")?c(l,"data-restore-title"):c(l,"data-move-title"),o.innerHTML="";for(const u of document.querySelectorAll(".js-project-column-navigation-item")){const t=c(u,"data-column-id"),r=e(a.content.cloneNode(!0),".js-move-card-to-column-button",HTMLButtonElement);r.setAttribute("data-card-id",c(s,"data-card-id")),r.setAttribute("data-content-id",c(s,"data-content-id")),r.setAttribute("data-content-type",c(s,"data-content-type")),r.setAttribute("data-column-id",t),n.hasAttribute("data-change-active-column")&&r.setAttribute("data-change-active-column",""),r.textContent=c(u,"data-column-name"),r.disabled=null!=i&&t===i,o.appendChild(r)}}(await qt(n,t),t)})),$("details-menu-select",".js-project-change-state-sync-menu",(function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/projects.ts:1607");const n=g(t.detail.relatedTarget,".js-project-change-state-sync-menu-parent"),o=e(t.detail.relatedTarget,"[data-menu-button-text]").textContent.trim();e(n,".js-project-change-state-sync-menu-button").textContent=o}),{capture:!0}),$("click",".js-project-card-closing-issue-summary",(function({currentTarget:t}){const e=!1===g(t,".Details-element").hasAttribute("open"),n=e?"data-linked-pr-hmac-expanded":"data-linked-pr-hmac-collapsed",o=t.getAttribute(n)||"",s=e?"data-linked-pr-expanded":"data-linked-pr-collapsed",r=t.getAttribute(s)||"";k({hydroEventPayload:r,hydroEventHmac:o,hydroClientContext:""},!0)})),function(t,e){let n,o;function s(e){if(n)return;const o=e.currentTarget;if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.ts:594");switch(Et(e.key)){case"confirm":case"Space":if(o.classList.contains("js-redacted-project-column-card"))return;if(!o.classList.contains("js-keyboard-movable"))return;n=new kt(o,t,(function(){n=null})),e.preventDefault();break;case"up":{const t=o.previousElementSibling;if(t&&t.classList.contains("js-project-column-card")){if(!(t instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.ts:612");t.focus(),e.preventDefault()}else{const t=o.closest(".js-project-column");t instanceof HTMLElement&&(t.focus(),e.preventDefault())}break}case"down":{const t=o.nextElementSibling;if(t&&t.classList.contains("js-project-column-card")){if(!(t instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.ts:628");t.focus(),e.preventDefault()}break}}}function c(t){if(o)return;if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;const n=t.currentTarget;if(!(n instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.ts:644");switch(Et(t.key)){case"confirm":case"Space":if(!n.classList.contains("js-keyboard-movable"))return;o=new At(n,e,(function(){o=null})),t.preventDefault();break;case"down":{const e=n.querySelector(".js-project-column-card");e&&(e.focus(),t.preventDefault());break}case"left":{const e=n.previousElementSibling;if(e&&e.classList.contains("js-project-column")){if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.ts:667");e.focus(),t.preventDefault()}break}case"right":{const e=n.nextElementSibling;if(e&&e.classList.contains("js-project-column")){if(!(e instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/projects/keyboard-mover.ts:676");e.focus(),t.preventDefault()}break}}}r(".js-project-column-card",(function(t){if(n){if(n.isMoving(t))return;n.cancel()}t.addEventListener("keydown",s),t.addEventListener("blur",(function e(){n&&n.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",s))}))})),r(".js-project-column",(function(t){if(o){if(o.isMoving(t))return;o.cancel()}t.addEventListener("keydown",c),t.addEventListener("blur",(function e(){o&&o.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",c))}))}))}(Dt,Rt),ce()}}}));
//# sourceMappingURL=projects-b8fcca02.js.map
